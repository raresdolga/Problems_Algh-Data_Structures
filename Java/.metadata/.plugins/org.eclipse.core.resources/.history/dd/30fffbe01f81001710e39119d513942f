package ex4_ch7;

import java.time.LocalDateTime;
import java.util.HashMap;

public class GateSystem {
	private int maxCapacity;
	private HashMap<Car,Ticket> cars;
	LocalDateTime today = LocalDateTime.now();
	
	public GateSystem(int maxCapacity){
		this.maxCapacity = maxCapacity;
		cars = new HashMap<>();
	}
	
	public boolean checkIfFull(){
		if(cars.keySet().size() > maxCapacity){
			return true;
		}
		return false;
	}
	
	public Ticket pay(Date period){
		Date now = new Date();
		now.day = today.getDayOfMonth();
		now.hour = today.getHour();
		now.minute = today.getMinute();
		Date endTime = new Date();
		endTime.minute = (now.minute + period.minute)%60;
		endTime.hour = (now.hour + period.hour)%24;
		endTime.hour += (now.minute + period.minute)/60;
		endTime.day = (now.day + period.day);
		endTime.day += (now.hour + period.hour)/24;
		
		Ticket t = new Ticket(now,endTime,period);
		return t;
	}
	public void enterCar(Car car, Date period){
		if(!checkIfFull()){
			Ticket t = pay(period);
			cars.put(car,t); 
		}
	}
	
	public void exitCar(Car c){
		Ticket t = cars.get(c);
		Date d = t.getPayedTime()();
	}
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
